\hypertarget{_2home_2anthony_2Documents_2libftpp_2src_2network_2message_2message_8hpp-example}{}\doxysection{/home/anthony/\+Documents/libftpp/src/network/message/message.\+hpp}
Class representing a structured message for network communication.\+This class provides a convenient way to handle structured messages in network protocols. It uses a \mbox{\hyperlink{classDataBuffer}{Data\+Buffer}} internally to store message data and supports serialization for network transmission.

\begin{DoxyNote}{Note}
Uses a \mbox{\hyperlink{classDataBuffer}{Data\+Buffer}} to store message data efficiently 

The transfer format is\+: \mbox{[}type (int)\mbox{]}\mbox{[}size (size\+\_\+t)\mbox{]}\mbox{[}data (variable)\mbox{]} 

During usage, the buffer contains only the data (without type), and the Message\+::\+Type is stored separately in \+\_\+type 

Supports stream operators ($<$$<$, $>$$>$) for easy data insertion and extraction
\end{DoxyNote}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{// Create a message with a specific type}}
\DoxyCodeLine{\mbox{\hyperlink{classMessage}{Message}} msg(1001);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// Add data using stream operators}}
\DoxyCodeLine{msg << std::string(\textcolor{stringliteral}{"{}Hello"{}}) << 42 << 3.14f;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// Serialize for network transmission}}
\DoxyCodeLine{\textcolor{keyword}{auto} serialized = msg.getSerializedData();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// Extract data (order matters!)}}
\DoxyCodeLine{std::string text;}
\DoxyCodeLine{\textcolor{keywordtype}{int} number;}
\DoxyCodeLine{\textcolor{keywordtype}{float} value;}
\DoxyCodeLine{msg >> text >> number >> value;}

\end{DoxyCode}



\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & on serialization/deserialization errors \\
\hline
\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{classDataBuffer}{Data\+Buffer}} for underlying data storage mechanism
\end{DoxySeeAlso}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#ifndef MESSAGE\_HPP}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define MESSAGE\_HPP}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <stddef.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <stdexcept>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}../../data\_structures/data\_buffer/data\_buffer.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }\mbox{\hyperlink{classMessage}{Message}}}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{    \textcolor{keyword}{using} Type = int;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{private}:}
\DoxyCodeLine{    \textcolor{keywordtype}{int}        \_fd;}
\DoxyCodeLine{    Type       \_type;}
\DoxyCodeLine{    \mbox{\hyperlink{classDataBuffer}{DataBuffer}} \_buffer;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{    \mbox{\hyperlink{classMessage}{Message}}(Type type);}
\DoxyCodeLine{    \mbox{\hyperlink{classMessage}{Message}}(\textcolor{keywordtype}{int} fd, Type type) : \_fd(fd), \_type(type) \{\}}
\DoxyCodeLine{    \mbox{\hyperlink{classMessage}{Message}}() : \_fd(-\/1), \_type(0) \{\}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{    \textcolor{keyword}{const} \mbox{\hyperlink{classMessage}{Message}}\& operator>>(T\& value)\textcolor{keyword}{ const}}
\DoxyCodeLine{\textcolor{keyword}{    }\{}
\DoxyCodeLine{        \_buffer >> value;}
\DoxyCodeLine{        \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{    \mbox{\hyperlink{classMessage}{Message}}\& operator<<(\textcolor{keyword}{const} T\& value)}
\DoxyCodeLine{    \{}
\DoxyCodeLine{        \_buffer << value;}
\DoxyCodeLine{        \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void}                       appendBytes(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* data, \textcolor{keywordtype}{size\_t} len);}
\DoxyCodeLine{    std::vector<unsigned char> getSerializedData() \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void}          setType(Message::Type type);}
\DoxyCodeLine{    Message::Type type() \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classDataBuffer}{DataBuffer}}* getBuffer();}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void} setMessageFd(\textcolor{keywordtype}{int} fd);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void} incr\_cursor(\textcolor{keywordtype}{size\_t} len) \textcolor{keyword}{const};}
\DoxyCodeLine{    \textcolor{keywordtype}{void} decr\_cursor(\textcolor{keywordtype}{size\_t} len) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} isComplet();}
\DoxyCodeLine{    \textcolor{keywordtype}{void} reset();}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keywordtype}{int}\& getFd() \textcolor{keyword}{const};}
\DoxyCodeLine{\};}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif}}

\end{DoxyCodeInclude}
 